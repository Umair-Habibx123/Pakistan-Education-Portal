<div class="container-fluid custom-container-padding">
  <div class="d-flex flex-column">
    <!-- Back Button -->
    <div
      class="d-flex align-items-center gap-3 mb-5 custom-back-button"
      (click)="goBack.emit()"
    >
      <h2 class="h5 fw-bold mb-0">
        <lucide-angular name="ArrowLeft"></lucide-angular>
        <span class="custom-dark-green-text">
          {{ university.universityName }}</span
        >
        / Details
      </h2>
    </div>

    <!-- University Image -->
    <div class="d-flex align-items-center gap-2 mb-5">
      <img
        [src]="
          'http://95.217.205.57:13400/assets/campusImages/' +
          university.imageEDoc
        "
        class="img-fluid rounded-3 custom-university-image shadow-sm"
      />
    </div>

    <!-- University Details -->
    <div
      class="d-flex flex-column flex-md-row align-items-start justify-content-between gap-4 mb-5"
    >
      <!-- Left Side (60%) -->
      <div
        class="col-12 col-md-8 d-flex align-items-start gap-4 p-0"
        style="height: auto; cursor: pointer"
      >
        <div>
          <img
            [src]="
              'http://95.217.205.57:13400/assets/universityLogo/' +
              university.logoEDoc
            "
            alt="{{ university.name }} Logo"
            class="rounded-3 custom-university-logo shadow-sm"
          />
        </div>
        <div class="flex-grow-1">
          <h3 class="fw-bold mb-2 custom-university-name text-dark">
            {{ university.universityName }}
          </h3>
          <div class="text-muted mb-3">
            <i class="fas fa-map-marker-alt me-2"></i> {{ university.cityName }}
          </div>
          <div class="d-flex flex-wrap gap-2 mb-3">
            <span
              class="badge bg-light text-dark border border-1 rounded-pill px-3 py-2"
              >{{ university.campusName }}</span
            >
          </div>
          <div class="d-flex align-items-center flex-wrap gap-2">
            <h5 class="fw-semibold mb-0 text-dark">Website:</h5>
            <a
              href="{{ university.url }}"
              class="badge bg-light text-primary border border-1 rounded-pill px-3 py-2 text-decoration-none"
              target="_blank"
              >{{ university.url }}</a
            >
          </div>
        </div>
      </div>

      <!-- Right Side (40%) -->
      <div class="col-12 col-md-3 text-center mt-3 mt-md-0 custom-apply-shadow">
        <div
          class="d-inline-flex align-items-center justify-content-center px-3 py-2 custom-apply-button"
          (click)="onApplyThroughUs()"
        >
          <span class="custom-apply-link"> Apply through us </span>
          <div class="custom-apply-icon">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5 19L19 5M19 5H9M19 5V15"
                stroke="black"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Information -->
    <div class="mb-4" *ngIf="filteredPrograms.length > 0">
      <h2 class="h4 fw-semibold mb-4 text-dark">Contact Information</h2>
    </div>

    <div class="container-fluid mb-5 p-0"
     *ngIf="filteredPrograms.length > 0"
     >
      <div
        *ngFor="let contact of contactInfo"
        class="custom-contact-info rounded-3 p-4 mb-3"
      >
        <div class="custom-contact-column">
          <div class="text-light mb-2">Employee Name</div>
          <div class="fw-medium">{{ contact.employeeName }}</div>
        </div>
        <div class="custom-contact-column">
          <div class="text-light mb-2">Designation</div>
          <div class="fw-medium">{{ contact.designation }}</div>
        </div>
        <div class="custom-contact-column">
          <div class="text-light mb-2">Email</div>
          <div class="fw-medium">{{ contact.email }}</div>
        </div>
        <div class="custom-contact-column">
          <div class="text-light mb-2">Contact</div>
          <div class="fw-medium">{{ contact.contact }}</div>
        </div>
        <div class="custom-contact-column">
          <div class="text-light mb-2">WhatsApp</div>
          <div class="fw-medium">{{ contact.whatsapp }}</div>
        </div>
      </div>
    </div>

    <div class="mb-4">
      <h2 class="h4 fw-semibold mb-3 text-dark">Programs</h2>
    </div>

    <div class="container-fluid mb-4 mb-md-5 p-0">
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 g-md-4">
        <div class="col" *ngFor="let program of getPaginatedPrograms()">
          <div
            class="d-flex flex-column p-3 p-md-4 rounded-3 shadow-custom-program border custom-program-card h-100"
          >
            <!-- Top Section -->
            <div class="d-flex border-bottom pb-3 mb-3">
              <div class="pe-3 flex-fill">
                <h5 class="fw-bold mb-1 title">{{ program.programName }}</h5>
                <p class="m-0 text-muted small">
                  {{ program.educationTypeTitle }}
                </p>
              </div>
              <div class="ps-3 border-start flex-fill">
                <h5 class="fw-bold small mb-1">Teaching Mode</h5>
                <p class="m-0 text-muted small">{{ program.teachingMode }}</p>
              </div>
            </div>

            <!-- Middle Section -->
            <div class="d-flex">
              <div class="text-dark flex-fill">
                <div class="d-flex align-items-center gap-1 mb-1">
                  <i class="fa-tag fas small"></i>
                  <strong class="small"
                    >{{ program.tuitionFee | number : "1.0-0" }} PKR</strong
                  >
                </div>
                <p class="m-0 text-muted small">Application Fee</p>
              </div>

              <div class="text-dark px-3 border-start border-end flex-fill">
                <div class="d-flex align-items-center gap-1 mb-1">
                  <i class="fa-hourglass-half fas small"></i>
                  <strong class="small">{{ program.duration }} Years</strong>
                </div>
                <p class="m-0 text-muted small">Duration</p>
              </div>

              <div class="text-dark ps-3 flex-fill">
                <div class="d-flex align-items-center gap-1 mb-1">
                  <i class="fa-certificate fas small"></i>
                  <strong class="small"
                    >{{ program.degreeFee | number : "1.0-0" }} PKR</strong
                  >
                </div>
                <p class="m-0 text-muted small">Degree Fee</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card border-0" *ngIf="filteredPrograms.length < 1">
        <div class="card-body text-center py-5">
          <div class="mb-4">
            <i class="fas fa-book-open fa-4x text-secondary opacity-50"></i>
          </div>
          <h4 class="card-title fw-semibold text-dark mb-3">
            No Programs Available
          </h4>
          <p class="card-text text-muted mb-0">
            Currently there are no programs offered at this campus.
          </p>
        </div>
      </div>
    </div>

    <!-- Pagination Section -->
    <div
      *ngIf="filteredPrograms.length > 0"
      class="d-flex flex-column flex-sm-row align-items-center justify-content-end gap-2 mt-4 border-top pt-4"
    >
      <div class="d-flex align-items-center gap-3">
        <button
          *ngFor="let page of [].constructor(totalPages); let i = index"
          class="fw-bold btn btn-link p-0"
          [ngClass]="{
            'fw-bold': currentPage === i + 1,
            'fw-medium': currentPage !== i + 1
          }"
          (click)="goToPage(i + 1)"
        >
          {{ i + 1 }}
        </button>
      </div>
      <div class="d-flex align-items-center gap-2">
        <button
          class="d-flex align-items-center gap-2 px-4 py-2 rounded border border-2 fw-medium btn btn-light custom-pagination-btn"
          (click)="previousPage()"
        >
          <span> <lucide-angular name="ArrowLeft"></lucide-angular></span>
          <span>Previous</span>
        </button>
        <button
          class="d-flex align-items-center gap-2 px-4 py-2 rounded border border-2 fw-medium btn btn-light custom-pagination-btn"
          (click)="nextPage()"
        >
          <span>Next</span>
          <span> <lucide-angular name="ArrowRight"></lucide-angular></span>
        </button>
      </div>
    </div>
  </div>
</div>
