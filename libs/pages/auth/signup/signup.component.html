<div class="container-fluid screen-container">
  <div class="row w-100">
    <!-- Left Side Image -->
    <div class="col-md-6 d-md-flex d-none left-image">
      <img src="assets/signup.png" class="img-fluid" alt="Illustration" />
    </div>

    <!-- Right Side Form -->
    <div class="col-md-6 right-form">
      <div class="form-container">
        <h4 class="fw-bold mb-4">Please Sign up to Apply</h4>
        
        <!-- Error Message -->
        <div *ngIf="errorMessage" class="alert alert-danger mb-3">
          {{ errorMessage }}
        </div>

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <!-- Email Field -->
          <div class="mb-4">
            <div class="input-group input-group-custom">
              <input
                type="email"
                formControlName="email"
                class="form-control bg-light border border-secondary"
                placeholder="shilpa.m@xyz.com"
                [ngClass]="{ 'is-invalid': registerForm.get('email')?.invalid && registerForm.get('email')?.touched }"
              />
              <span class="input-group-text border border-secondary input-group-text-custom">
                <i class="bi bi-envelope"></i>
              </span>
            </div>
            <small *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="text-danger">
              Please enter a valid email address
            </small>
          </div>

          <!-- Mobile Field -->
          <!-- <div class="mb-4">
            <div class="input-group input-group-custom">
              <input
                type="text"
                formControlName="mobile"
                class="form-control bg-light border border-secondary"
                placeholder="9463728345"
                [ngClass]="{ 'is-invalid': registerForm.get('mobile')?.invalid && registerForm.get('mobile')?.touched }"
              />
              <span class="input-group-text border border-secondary input-group-text-custom">
                <i class="bi bi-phone"></i>
              </span>
            </div>
            <small *ngIf="registerForm.get('mobile')?.invalid && registerForm.get('mobile')?.touched" class="text-danger">
              Please enter a valid 10-digit mobile number
            </small>
          </div> -->

          <div class="mb-4">
            <div class="input-group input-group-custom">
              <input
                type="text"
                formControlName="username"
                class="form-control bg-light border border-secondary"
                placeholder="Username"
                [ngClass]="{ 'is-invalid': registerForm.get('username')?.invalid && registerForm.get('username')?.touched }"
              />
              <span class="input-group-text border border-secondary input-group-text-custom">
                <i class="bi bi-phone"></i>
              </span>
            </div>
            <small *ngIf="registerForm.get('username')?.invalid && registerForm.get('username')?.touched" class="text-danger">
              Please enter a valid Username 3-20 digits
            </small>
          </div>

          <!-- Password Field -->
          <div class="mb-4">
            <div class="input-group input-group-custom">
              <input
                [type]="showPassword ? 'text' : 'password'"
                formControlName="password"
                class="form-control bg-light border border-secondary"
                placeholder="Password"
                [ngClass]="{ 'is-invalid': registerForm.get('password')?.invalid && registerForm.get('password')?.touched }"
              />
              <span
                class="input-group-text border border-secondary input-group-text-custom"
                (click)="togglePasswordVisibility()"
              >
                <i [class]="showPassword ? 'bi bi-eye' : 'bi bi-eye-slash'"></i>
              </span>
            </div>
            <small class="text-muted">
              <i class="bi bi-info-circle"></i> Must be at least 8 characters with one uppercase letter
            </small>
            <small *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="text-danger d-block">
              Password must be at least 8 characters with one uppercase letter
            </small>
          </div>

          <!-- Confirm Password Field -->
          <div class="mb-4">
            <div class="input-group input-group-custom">
              <input
                [type]="showConfirmPassword ? 'text' : 'password'"
                formControlName="confirmPassword"
                class="form-control bg-light border border-secondary"
                placeholder="Confirm Password"
                [ngClass]="{ 'is-invalid': (registerForm.get('confirmPassword')?.invalid || registerForm.hasError('mismatch')) && registerForm.get('confirmPassword')?.touched }"
              />
              <span
                class="input-group-text border border-secondary input-group-text-custom"
                (click)="toggleConfirmPasswordVisibility()"
              >
                <i [class]="showConfirmPassword ? 'bi bi-eye' : 'bi bi-eye-slash'"></i>
              </span>
            </div>
            <small *ngIf="registerForm.hasError('mismatch') && registerForm.get('confirmPassword')?.touched" class="text-danger">
              Passwords do not match
            </small>
          </div>

          <!-- Signup Button -->
          <button 
            class="btn btn-dark btn-signup mb-1" 
            type="submit"
            [disabled]="registerForm.invalid || isLoading"
          >
            <span *ngIf="!isLoading">Sign up</span>
            <span *ngIf="isLoading">
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              Processing...
            </span>
          </button>

          <!-- Divider -->
          <div class="divider my-4">
            <hr class="divider-line" />
            <span class="divider-text">OR</span>
            <hr class="divider-line" />
          </div>

          <!-- Google Sign-up Button -->
          <button 
            class="btn btn-outline-secondary btn-google mb-1 border: 1px solid var(--secondary);"
            type="button"
          >
            <i class="fa-brands fa-google"></i> Sign up with Google
          </button>

          <!-- Sign-in Link -->
          <div class="text-center mt-4">
            Already a member?
            <a [routerLink]="'/auth/login'" class="signin-link">Sign in</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>